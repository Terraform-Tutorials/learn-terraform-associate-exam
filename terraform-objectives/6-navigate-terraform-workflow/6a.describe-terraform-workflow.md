# Describe Terraform workflow ( Write -> Plan -> Create )
vamos aproveitar para aprender e listar pontos importantes sobre o workflow do terraform nessa sessão.

## The Core Terraform Workflow
basicamente podemos afirmas que o workflow do terraform funciona da seguinte forma:

1. Write - autor (infrastructure as code)
2. Plan - prevre mudanças antes do apply
3. Apply - provisionamento da infraestrutura reproduzida

vamos seguir com a doc do terraform para aprender como que cada uma dessas três etapas ocorre no contexto do trabalho individual, como elas evoluem quando uma equipe está colaborando na infraestrutura e como o Terraform Cloud permite que esse fluxo de trabalho seja executado sem problemas para organizações inteiras.

# Working as an Individual Practitioner
nessa sessão vamos supor o uso de uma pessoa trabalhando com infraestrutura como código.

## Write
essa é a parte onde que escrevemos a configuração do Terraform da mesma forma que escreve o código: no editor de sua escolha. É uma prática comum armazenar seu trabalho em um repositório controlado por versão, mesmo quando você está operando apenas como indivíduo.

```bash
# Create repository
$ git init my-infra && cd my-infra

Initialized empty Git repository in /.../my-infra/.git/

# Write initial config
$ vim main.tf

# Initialize Terraform
$ terraform init

Initializing provider plugins...
# ...
Terraform has been successfully initialized!
```

À medida que você progride na criação de sua configuração, a execução repetida de planos pode ajudar a eliminar erros de sintaxe e garantir que sua configuração esteja funcionando conforme o esperado.

```bash
# Make edits to config
$ vim main.tf

# Review plan
$ terraform plan

# Make additional edits, and repeat
$ vim main.tf
```

## Plan
nessa parte do workflow sabemos como está o nosso projeto e como podemos planejar o plano da nossa infraestrutura.

```bash
git add main.tf
git commit -m 'Managing infrastructure as code!'
```

como o terraform apply exibirá um plano para confirmação antes de prosseguir com a alteração de qualquer infraestrutura, esse é o comando que você executará para a revisão final.

`terraform apply`

## Apply
depois de ter feito o processo de planejamento da infraestrutura, podemos obter o comando `terraform apply` para aplicar tudo que desejamos.

```bash
Do you want to perform these actions?

  Terraform will perform the actions described above.
  Only 'yes' will be accepted to approve.
  Enter a value: yes

# ...

Apply complete! Resources: 1 added, 0 changed, 0 destroyed.
```

Neste ponto, é comum enviar seu repositório de controle de versão para um local remoto por segurança.

```bash
git remote add origin https://github.com/*user*/*repo*.git
git push origin main
```

# Working as a Team